# [作業 1]資料庫建立與維護

請繳交三個 SQL 執行檔以及一個 SQL 資料庫檔(MDF)，規格說明如下:

##問題 1 - CREATE Database & Table (檔名: CreateDB.sql)
修改[練習 1]產生的資料庫以及所屬的三個資料表 ([帳號], [個人資訊]以及[交易紀錄])語法，完成以下新建資料表語法，並分別儲存成一個 sql 執行檔，規格說明如下:

1.  CREATE TABLE 規格: (合計共 65 分)

- 1.1. 新增資料庫，需包含用指定特定資料檔路徑(15 分)
- 1.2. 每個資料表需建立個別的 PRIMARY KEY (每個表各 5 分，共 15 分)
- 1.3 將[帳號], [個人資訊]這兩個資料表以[個人帳號 ID]欄位進行 Foreigen Key 關聯(每個表各 10 分，共 20 分)
- 1.4 在 [個人資訊]資料表中加入限制開戶應超過 18 歲才能開戶(才能建檔) (5 分)
- 1.5 在[個人資訊]的[性別]欄位中，設定預設值為'U' (5 分)
- 1.6 在[個人資訊]的 ID 設定資料型態為 int,且為 PRIMARY KEY，且預設初始值為 100000, 當新增資料時，每次數值自動加 2 (5 分)

##問題 2 - ALTER Database (檔名: AlterDB.sql) (合計共 85 分)

- 2.1 附加資料庫 : 需包含用指定特定 mdf 檔(15 分)
  - 提示: 需先將資料庫 bank.mdf 檔建立起來，再用 FOR ATTACH 載入 MDF 檔。bank.mdf 。路徑請指定為 D:\MSSQL_DB\bank.mdf
- 2.2 修改資料庫中的主檔，並將其 SIZE, MAXSIZE 以及 FILEGROWTH 的數值變成原本的 2 倍 (每個各 5 分，共 15 分)
  2.3 AlterDB.sql: ALTER TABLE 規格:

- 2.3.1 修改在[個人資訊]的[性別]欄位中，將預設值改為'M' (5 分)
- 2.3.2 將[帳號]以及[交易紀錄]以[帳號 ID]欄位進行 Foreigen Key 關聯，且不得破壞 1.3 所建立的關聯性 (15 分)
- 2.3.3 修改 [個人資訊]資料表中超過 18 歲才能開戶的限制，並變更為國籍為 Taiwan 才能開戶 (5 分)
- 2.3.4 修改這三個資料表的[更新日期與時間]欄位，設定預設值為 "今天" (每個各 10 分，共 15 分)
- 2.3.5 新增一資料表，為銀行[分行帳號資料表]內容包含: (1)分行帳號 (2)分行名稱 (5 分)
- 2.3.6 將上述 2.3.5(1)分行帳號使用 Alter 語法使用 Foreigen Key 與[帳號資料表] 進行關聯，且不得破壞 2.3.2 與 1.3 所建立的關聯性 (10 分)

問題 3 - 新增資料表與更新關聯 (檔名: SelectTable.sql) (合計共 110 分)
以 SELECT 語法查詢經過 CreateDB.sql 以及 AlterDB.sql 執行後的資料庫，，規則說明如下

- 3.1 使用 SELECT 查詢語法進行跨資料表查詢，並顯示以下欄位 (1) "姓氏 + 名字" (姓與名中間要 1 個空白), (2) 生日與性別, (3)城市, 國籍 (4)帳號 (5) 分行名稱 (6) 餘額。其中(1), (2), (3)顯示結果,兩個欄位數值中間需要有一個','符號等作為區隔需分兩欄位的數值 (1:15 分、2-3: 10 分，4-6: 5 分，合計: 15x1 + 10x3 + 5x3=50 分)
- 3.2 使用 SELECT 語法查詢所有使用者帳號一共交易的次數，並將結果以(1) "姓氏 + 名字", (2) 交易次數的結果顯示出來 (1:20 分, 2:20 分, 執行結果正確性: 20 分，合計: 60 分)

作業限制:

1.  請繳交以下檔案，並用 7z 或 zip 壓縮成一個檔案上傳

- (1) bank.mdf
- (2) CreateDB.sql
- (3) AlterDB.sql
- (4) SelectTable.sql

2.  bank.mdf 內容需包含 (合計共 40 分)，數量跟內容均正確才給分

- [帳號]: 至少要有2人各1筆資料 "10分"
- [個人資訊]: 至少有5筆資料(10分)
- [交易紀錄] 至少要有 20 筆資料，每個帳號須包含至少 1 筆交易紀錄(10 分)
- [分行帳號資料表]: 至少要有3組分行資料(10分)
